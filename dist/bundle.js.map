{"version":3,"file":"bundle.js","sources":["../src/index.js"],"sourcesContent":["import getElement from 'dom-get-element';\nimport { dispatchEvent } from 'dom-event-dispatch';\n\nexport function toggleMixin(dest){\n\n    dest.initToggle = function({\n        toggle = null,\n        display = 'block',\n        element = null\n    } = {}){\n        this._toggle = toggle;\n        this._display = display;\n        if(element)\n            this.element = getElement(element);\n    };\n\n    dest.toggleDisplay = function(show){\n        return toggleDisplay(this, show, this._display);\n    };\n\n    dest.toggle = function(show){\n        if(yesToggle(this, show)){\n\n            const cancelled = dispatchEvent(this.element, 'beforetoggled', {\"bubbles\":false, \"cancelable\":true});\n\n            if(cancelled){\n                return Promise.resolve(getDisplay(this.element) !== 'none');\n            }\n\n            if(!this._toggle){\n                return Promise.resolve(\n                    this.toggleDisplay(show)\n                );\n            }\n\n            return Promise.resolve(this._toggle.call(this, !!show))\n            .then(()=>this.toggleDisplay(show));\n        }\n\n        return Promise.resolve(getDisplay(this.element) !== 'none');\n    };\n}\n\nfunction yesToggle(that, show){\n\n    if(show === void 0) return true\n    {\n        const display = getDisplay(that.element);\n        return (\n            show && display === 'none'\n            ||\n            !show && display !== 'none'\n        );\n    };\n}\n\nfunction toggleDisplay(that, show, display){\n    if(show === void 0){\n        const current = getDisplay(that.element);\n        that.element.style.display = (\n            display = current === 'none'\n            ? display : 'none'\n        );\n\n        show = display !== 'none';\n    }else{\n        that.element.style.display = show ? display : 'none';\n    }\n\n    dispatchEvent(that.element, 'toggled', {\"bubbles\":false});\n\n    return show;\n}\n\nfunction getDisplay(el){\n    if(!el.style.display){\n        const style = window.getComputedStyle(el, null);\n        return style.display;\n    }else{\n        return el.style.display;\n    }\n}\n"],"names":["const","dispatchEvent","this"],"mappings":"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"}