{"version":3,"file":"dom-toggle-mixin.js","sources":["../node_modules/dom-is-element/dist/bundle.es.js","../node_modules/dom-get-element/dist/bundle.es.js","../node_modules/dom-event-dispatch/dist/bundle.es.js","../src/index.js"],"sourcesContent":["function isElement(o){\n    var type = typeof Element; //HTMLElement maybe\n    return (\n    type === \"object\" || type === 'function'\n    ? o instanceof Element\n    //DOM2\n    : !!o\n        && typeof o === \"object\"\n        && o.nodeType === 1 //Definitely an Element\n        && typeof o.nodeName===\"string\"\n    );\n}\n\nexport default isElement;\n//# sourceMappingURL=bundle.es.js.map\n","import isElement from 'dom-is-element';\n\nfunction getElement(element, context){\n    if ( context === void 0 ) context = document;\n\n    if(typeof element === 'string'){\n        try{\n            return context.querySelector(element);\n        }catch(e){ throw e; }\n    }\n\n    if(isElement(element)) { return element; }\n\n    if(!!element && typeof element === 'object'){\n        if(isElement(element.element)){\n            return element.element;\n        }else if(isElement(element[0])){\n            return element[0];\n        }\n    }\n\n    throw new TypeError((\"value (\" + element + \") in isElement(value)\\n    is not an element, valid css selector,\\n    or object with an element property, or index 0.\"));\n\n}\n\nexport default getElement;\n//# sourceMappingURL=bundle.es.js.map\n","var createEvent = (function (){\n    try{\n        new Event('nothing');\n        return function (name, options) { return new Event(name, options); };\n    }catch(e){}\n\n    return function (name, options) {\n        var event = document.createEvent('Event');\n        event.initEvent(name, options.bubbles, options.cancelable);\n        return event;\n    };\n})();\n\nfunction dispatchEvent(el, name, options){\n    if ( options === void 0 ) options = {};\n\n    var event = createEvent(name, options);\n    return !el.dispatchEvent(event);\n}\n\nexport { dispatchEvent };\n//# sourceMappingURL=bundle.es.js.map\n","import getElement from 'dom-get-element';\nimport { dispatchEvent } from 'dom-event-dispatch';\n\nexport function toggleMixin(dest){\n\n    dest.initToggle = function({\n        toggle = null,\n        display = 'block',\n        element = null\n    } = {}){\n        this._toggle = toggle;\n        this._display = display;\n        if(element)\n            this.element = getElement(element);\n    };\n\n    dest.toggleDisplay = function(show){\n        return toggleDisplay(this, show, this._display);\n    };\n\n    dest.toggle = function(show){\n        if(yesToggle(this, show)){\n\n            const cancelled = dispatchEvent(this.element, 'beforetoggled', {\"bubbles\":false, \"cancelable\":true});\n\n            if(cancelled){\n                return Promise.resolve(getDisplay(this.element) !== 'none');\n            }\n\n            if(!this._toggle){\n                return Promise.resolve(\n                    this.toggleDisplay(show)\n                );\n            }\n\n            return Promise.resolve(this._toggle.call(this, !!show))\n            .then(()=>this.toggleDisplay(show));\n        }\n\n        return Promise.resolve(getDisplay(this.element) !== 'none');\n    };\n}\n\nfunction yesToggle(that, show){\n\n    if(show === void 0) return true\n    {\n        const display = getDisplay(that.element);\n        return (\n            show && display === 'none'\n            ||\n            !show && display !== 'none'\n        );\n    };\n}\n\nfunction toggleDisplay(that, show, display){\n    if(show === void 0){\n        const current = getDisplay(that.element);\n        that.element.style.display = (\n            display = current === 'none'\n            ? display : 'none'\n        );\n\n        show = display !== 'none';\n    }else{\n        that.element.style.display = show ? display : 'none';\n    }\n\n    dispatchEvent(that.element, 'toggled', {\"bubbles\":false});\n\n    return show;\n}\n\nfunction getDisplay(el){\n    if(!el.style.display){\n        const style = window.getComputedStyle(el, null);\n        return style.display;\n    }else{\n        return el.style.display;\n    }\n}\n"],"names":["const","this"],"mappings":"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"}