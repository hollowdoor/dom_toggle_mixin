{"version":3,"file":"dom-toggle-mixin.min.js","sources":["../node_modules/dom-is-element/dist/bundle.es.js","../node_modules/dom-get-element/dist/bundle.es.js","../node_modules/dom-event-dispatch/dist/bundle.es.js","../src/index.js"],"sourcesContent":["function isElement(o){\n    var type = typeof Element; //HTMLElement maybe\n    return (\n    type === \"object\" || type === 'function'\n    ? o instanceof Element\n    //DOM2\n    : !!o\n        && typeof o === \"object\"\n        && o.nodeType === 1 //Definitely an Element\n        && typeof o.nodeName===\"string\"\n    );\n}\n\nexport default isElement;\n//# sourceMappingURL=bundle.es.js.map\n","import isElement from 'dom-is-element';\n\nfunction getElement(element, context){\n    if ( context === void 0 ) context = document;\n\n    if(typeof element === 'string'){\n        try{\n            return context.querySelector(element);\n        }catch(e){ throw e; }\n    }\n\n    if(isElement(element)) { return element; }\n\n    if(!!element && typeof element === 'object'){\n        if(isElement(element.element)){\n            return element.element;\n        }else if(isElement(element[0])){\n            return element[0];\n        }\n    }\n\n    throw new TypeError((\"value (\" + element + \") in isElement(value)\\n    is not an element, valid css selector,\\n    or object with an element property, or index 0.\"));\n\n}\n\nexport default getElement;\n//# sourceMappingURL=bundle.es.js.map\n","var createEvent = (function (){\n    try{\n        new Event('nothing');\n        return function (name, options) { return new Event(name, options); };\n    }catch(e){}\n\n    return function (name, options) {\n        var event = document.createEvent('Event');\n        event.initEvent(name, options.bubbles, options.cancelable);\n        return event;\n    };\n})();\n\nfunction dispatchEvent(el, name, options){\n    if ( options === void 0 ) options = {};\n\n    var event = createEvent(name, options);\n    return !el.dispatchEvent(event);\n}\n\nexport { dispatchEvent };\n//# sourceMappingURL=bundle.es.js.map\n","import getElement from 'dom-get-element';\nimport { dispatchEvent } from 'dom-event-dispatch';\n\nexport function toggleMixin(dest){\n\n    dest.initToggle = function({\n        toggle = null,\n        display = 'block',\n        element = null\n    } = {}){\n        this._toggle = toggle;\n        this._display = display;\n        if(element)\n            this.element = getElement(element);\n    };\n\n    dest.toggleDisplay = function(show){\n        return toggleDisplay(this, show, this._display);\n    };\n\n    dest.toggle = function(show){\n        if(yesToggle(this, show)){\n\n            const cancelled = dispatchEvent(this.element, 'beforetoggled', {\"bubbles\":false, \"cancelable\":true});\n\n            if(cancelled){\n                return Promise.resolve(getDisplay(this.element) !== 'none');\n            }\n\n            if(!this._toggle){\n                return Promise.resolve(\n                    this.toggleDisplay(show)\n                );\n            }\n\n            return Promise.resolve(this._toggle.call(this, !!show))\n            .then(()=>this.toggleDisplay(show));\n        }\n\n        return Promise.resolve(getDisplay(this.element) !== 'none');\n    };\n}\n\nfunction yesToggle(that, show){\n\n    if(show === void 0) return true\n    {\n        const display = getDisplay(that.element);\n        return (\n            show && display === 'none'\n            ||\n            !show && display !== 'none'\n        );\n    };\n}\n\nfunction toggleDisplay(that, show, display){\n    if(show === void 0){\n        const current = getDisplay(that.element);\n        that.element.style.display = (\n            display = current === 'none'\n            ? display : 'none'\n        );\n\n        show = display !== 'none';\n    }else{\n        that.element.style.display = show ? display : 'none';\n    }\n\n    dispatchEvent(that.element, 'toggled', {\"bubbles\":false});\n\n    return show;\n}\n\nfunction getDisplay(el){\n    if(!el.style.display){\n        const style = window.getComputedStyle(el, null);\n        return style.display;\n    }else{\n        return el.style.display;\n    }\n}\n"],"names":["isElement","o","type","Element","nodeType","nodeName","getElement","element","context","document","querySelector","e","TypeError","dispatchEvent","el","name","options","event","createEvent","yesToggle","that","show","const","display","getDisplay","toggleDisplay","current","style","bubbles","window","getComputedStyle","Event","initEvent","cancelable","dest","initToggle","ref","this","_toggle","toggle","_display","Promise","resolve","call","then"],"mappings":"0BAAA,SAASA,EAAUC,GACf,IAAIC,SAAcC,QAClB,MACS,WAATD,GAA8B,aAATA,EACnBD,aAAaE,UAEXF,GACgB,iBAANA,GACQ,IAAfA,EAAEG,UACkB,iBAAbH,EAAEI,SCPpB,SAASC,EAAWC,EAASC,GAGzB,QAFiB,IAAZA,IAAqBA,EAAUC,UAEd,iBAAZF,EACN,IACI,OAAOC,EAAQE,cAAcH,GAChC,MAAMI,GAAI,MAAMA,EAGrB,GAAGX,EAAUO,GAAY,OAAOA,EAEhC,GAAKA,GAA8B,iBAAZA,EAAqB,CACxC,GAAGP,EAAUO,EAAQA,SACjB,OAAOA,EAAQA,QACb,GAAGP,EAAUO,EAAQ,IACvB,OAAOA,EAAQ,GAIvB,MAAM,IAAIK,UAAW,UAAYL,EAAU,0HCR/C,SAASM,EAAcC,EAAIC,EAAMC,QACZ,IAAZA,IAAqBA,MAE1B,IAAIC,EAAQC,EAAYH,EAAMC,GAC9B,OAAQF,EAAGD,cAAcI,GC0B7B,SAASE,EAAUC,EAAMC,GAErB,QAAY,IAATA,EAAiB,OAAO,EAEvBC,IAAMC,EAAUC,EAAWJ,EAAKb,SAChC,OACIc,GAAoB,SAAZE,IAEPF,GAAoB,SAAZE,EAKrB,SAASE,EAAcL,EAAMC,EAAME,GAC/B,QAAY,IAATF,EAAgB,CACfC,IAAMI,EAAUF,EAAWJ,EAAKb,SAChCa,EAAKb,QAAQoB,MAAMJ,QACfA,EAAsB,SAAZG,EACRH,EAAU,OAGhBF,EAAmB,SAAZE,OAEPH,EAAKb,QAAQoB,MAAMJ,QAAUF,EAAOE,EAAU,OAKlD,OAFAV,EAAcO,EAAKb,QAAS,WAAYqB,SAAU,IAE3CP,EAGX,SAASG,EAAWV,GAChB,OAAIA,EAAGa,MAAMJ,QAIFT,EAAGa,MAAMJ,QAHFM,OAAOC,iBAAiBhB,EAAI,MAC7BS,QD7ErB,IAAIL,EAAc,WACd,IAEI,OADA,IAAIa,MAAM,WACH,SAAUhB,EAAMC,GAAW,OAAO,IAAIe,MAAMhB,EAAMC,IAC5D,MAAML,IAEP,OAAO,SAAUI,EAAMC,GACnB,IAAIC,EAAQR,SAASS,YAAY,SAEjC,OADAD,EAAMe,UAAUjB,EAAMC,EAAQY,QAASZ,EAAQiB,YACxChB,GATG,iBCGX,SAAqBiB,GAExBA,EAAKC,WAAa,SAASC,oDACd,qCACC,wCACA,MAEVC,KAAKC,QAAUC,EACfF,KAAKG,SAAWjB,EACbhB,IACC8B,KAAK9B,QAAUD,EAAWC,KAGlC2B,EAAKT,cAAgB,SAASJ,GAC1B,OAAOI,EAAcY,KAAMhB,EAAMgB,KAAKG,WAG1CN,EAAKK,OAAS,SAASlB,cACnB,OAAGF,EAAUkB,KAAMhB,GAEGR,EAAcwB,KAAK9B,QAAS,iBAAkBqB,SAAU,EAAOK,YAAa,IAGnFQ,QAAQC,QAAqC,SAA7BlB,EAAWa,KAAK9B,UAGvC8B,KAAKC,QAMFG,QAAQC,QAAQL,KAAKC,QAAQK,KAAKN,OAAQhB,IAChDuB,KAAK,kBAAIP,EAAKZ,cAAcJ,KANlBoB,QAAQC,QACXL,KAAKZ,cAAcJ,IAQxBoB,QAAQC,QAAqC,SAA7BlB,EAAWa,KAAK9B"}